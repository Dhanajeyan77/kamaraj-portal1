{% extends "layout.html" %}

{% block content %}
<style>
    /* Styling to match your professional theme */
    .leaderboard-container { 
        padding: 20px; 
        max-width: 1000px; 
        margin: auto; 
    }
    
    .card { 
        background: white; 
        padding: 30px; 
        border-radius: 15px; 
        box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
    }
    
    h2 { color: #2c3e50; text-align: center; margin-bottom: 20px; font-size: 1.8rem; }
    
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    
    th, td { padding: 15px; border-bottom: 1px solid #eee; text-align: left; }
    
    th { background-color: #34495e; color: white; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; }
    
    .rank-1 { background-color: #fff9c4; font-weight: bold; } /* Gold highlight for #1 */
    .rank-2 { background-color: #f1f1f1; }
    .rank-3 { background-color: #fff5e6; }

    /* Section Badges for the Fight */
    .badge-section {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: bold;
        color: white;
        text-transform: uppercase;
        display: inline-block;
    }
    .section-A { background-color: #e74c3c; } /* Red */
    .section-B { background-color: #3498db; } /* Blue */
    .section-C { background-color: #2ecc71; } /* Green */

    .btn-back { 
        display: inline-block; 
        margin-bottom: 20px; 
        text-decoration: none; 
        color: #3498db; 
        font-weight: bold; 
        transition: 0.2s;
    }
    .btn-back:hover { color: #2980b9; }

    .solved-count {
        font-size: 1.1rem;
        color: #2c3e50;
    }
</style>

<div class="leaderboard-container">
    <div class="card">
        <a href="{{ url_for('home') }}" class="btn-back">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
        
        <h2>üèÜ Top Performers</h2>
        
        <table>
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Roll Number</th>
                    <th>Section</th>
                    <th>Problems Solved</th>
                </tr>
            </thead>
            <tbody>
                {% for row in rankings %}
                <tr class="rank-{{ loop.index }}">
                    <td>
                        {% if loop.index == 1 %}ü•á{% elif loop.index == 2 %}ü•à{% elif loop.index == 3 %}ü•â{% else %}{{ loop.index }}{% endif %}
                    </td>
                    <td style="font-weight: 600; color: #34495e;">{{ row['name'] }}</td>
                    <td style="font-family: monospace; font-weight: 600; color: #7f8c8d;">{{ row['roll_no'] }}</td>
                    <td>
                        <span class="badge-section section-{{ row['section'] }}">
                            {{ row['section'] }}
                        </span>
                    </td>
                    <td>
                        <strong class="solved-count">{{ row['total'] }}</strong> 
                        <span style="color: #bdc3c7; font-size: 0.8rem;">/ 90</span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" style="text-align: center; padding: 30px; color: #95a5a6;">
                        No submissions found yet. Be the first!
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}